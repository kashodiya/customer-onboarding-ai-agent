<mat-toolbar color="primary" class="navigation-toolbar">
  <span class="app-title">Customer Onboarding</span>
  
  <div class="toolbar-spacer"></div>
  
  <!-- Autosaving Indicator -->
  <div *ngIf="isAutosaving" class="autosaving-indicator">
    <mat-spinner diameter="16" color="accent"></mat-spinner>
    <span>Autosaving...</span>
  </div>
  
  <!-- Past Submissions Dropdown -->
  <button mat-button [matMenuTriggerFor]="submissionsMenu" class="submissions-button">
    <mat-icon>history</mat-icon>
    <span>Past Submissions</span>
    <span matBadge="{{(submissions$ | async)?.length || 0}}" matBadgeOverlap="false" 
          matBadgeColor="accent" matBadgeSize="small" class="badge-container"></span>
  </button>
  
  <mat-menu #submissionsMenu="matMenu" class="submissions-menu">
    <div class="menu-header">
      <h3>Past Submissions</h3>
    </div>
    
    <div *ngIf="(submissions$ | async)?.length === 0" class="no-submissions">
      <mat-icon>inbox</mat-icon>
      <span>No submissions yet</span>
    </div>
    
    <button mat-menu-item 
            *ngFor="let submission of submissions$ | async" 
            (click)="onLoadSubmission(submission.id)"
            class="submission-item">
      <div class="submission-content">
        <div class="submission-header">
          <mat-icon class="submission-icon">
            {{submission.status === 'draft' ? 'draft' : 'description'}}
          </mat-icon>
          <span class="submission-name">{{submission.name}}</span>
        </div>
        <div class="submission-meta">
          <span class="submission-date">{{submission.timestamp | date:'short'}}</span>
          <span class="submission-status" [class]="submission.status">
            {{submission.status}}
          </span>
        </div>
      </div>
    </button>
    
    <mat-divider></mat-divider>
    
    <button mat-menu-item (click)="onImportSubmission()" class="import-button">
      <mat-icon>upload_file</mat-icon>
      <span>Import Submission</span>
    </button>
    
    <button mat-menu-item (click)="onClearDraft()" class="clear-draft-button">
      <mat-icon>clear</mat-icon>
      <span>Clear Current Draft</span>
    </button>
  </mat-menu>
  
  <!-- New Form Button -->
  <button mat-button (click)="onNewForm()" class="new-form-button">
    <mat-icon>add</mat-icon>
    <span>New Form</span>
  </button>
</mat-toolbar>

<!-- Hidden file input for importing -->
<input #fileInput type="file" accept=".json" (change)="onFileSelected($event)" style="display: none;"> 